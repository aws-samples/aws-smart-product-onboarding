{
  "name": "amzn-smart-product-onboarding-core-utils",
  "root": "packages/smart-product-onboarding/core-utils",
  "tags": ["python"],
  "targets": {
    "install": {
      "dependsOn": ["^install"],
      "executor": "nx:run-commands",
      "options": {
        "command": "poetry env use python$(pyenv latest 3 | cut -d '.' -f 1,2 || echo '') && poetry check --lock && poetry install",
        "cwd": "packages/smart-product-onboarding/core-utils",
        "env": {
          "VIRTUAL_ENV": "$(env -u VIRTUAL_ENV poetry env info -p || echo '')",
          "PATH": "$(echo $(env -u VIRTUAL_ENV poetry env info -p || echo '')/bin:$PATH)"
        }
      }
    },
    "update": {
      "executor": "nx:run-commands",
      "options": {
        "command": "poetry env use python$(pyenv latest 3 | cut -d '.' -f 1,2 || echo '') && poetry update",
        "cwd": "packages/smart-product-onboarding/core-utils",
        "env": {
          "VIRTUAL_ENV": "$(env -u VIRTUAL_ENV poetry env info -p || echo '')",
          "PATH": "$(echo $(env -u VIRTUAL_ENV poetry env info -p || echo '')/bin:$PATH)"
        }
      }
    },
    "test": {
      "executor": "nx:run-commands",
      "options": {
        "command": "poetry run pytest",
        "cwd": "packages/smart-product-onboarding/core-utils",
        "env": {
          "VIRTUAL_ENV": "$(env -u VIRTUAL_ENV poetry env info -p || echo '')",
          "PATH": "$(echo $(env -u VIRTUAL_ENV poetry env info -p || echo '')/bin:$PATH)"
        }
      }
    },
    "package": {
      "dependsOn": ["build"],
      "executor": "nx:run-commands",
      "options": {
        "command": "echo 'Package completed via build target'",
        "cwd": "packages/smart-product-onboarding/core-utils"
      }
    },
    "build": {
      "dependsOn": ["test"],
      "executor": "nx:run-commands",
      "options": {
        "command": "poetry build",
        "cwd": "packages/smart-product-onboarding/core-utils",
        "env": {
          "VIRTUAL_ENV": "$(env -u VIRTUAL_ENV poetry env info -p || echo '')",
          "PATH": "$(echo $(env -u VIRTUAL_ENV poetry env info -p || echo '')/bin:$PATH)"
        },
        "outputs": ["{projectRoot}/dist"]
      }
    },
    "publish": {
      "dependsOn": ["package"],
      "executor": "nx:run-commands",
      "options": {
        "command": "poetry publish",
        "cwd": "packages/smart-product-onboarding/core-utils",
        "env": {
          "VIRTUAL_ENV": "$(env -u VIRTUAL_ENV poetry env info -p || echo '')",
          "PATH": "$(echo $(env -u VIRTUAL_ENV poetry env info -p || echo '')/bin:$PATH)"
        }
      }
    },
    "publish:test": {
      "dependsOn": ["package"],
      "executor": "nx:run-commands",
      "options": {
        "command": "poetry publish --repository testpypi",
        "cwd": "packages/smart-product-onboarding/core-utils",
        "env": {
          "VIRTUAL_ENV": "$(env -u VIRTUAL_ENV poetry env info -p || echo '')",
          "PATH": "$(echo $(env -u VIRTUAL_ENV poetry env info -p || echo '')/bin:$PATH)"
        }
      }
    }
  }
}
